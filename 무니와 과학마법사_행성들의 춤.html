<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬´ë‹ˆì™€ ê³¼í•™ ë§ˆë²•ì‚¬ - í–‰ì„±ë“¤ì˜ ì¶¤ (ìµœì¢… ìˆ˜ì •)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Gaegu&display=swap');

        /* ê²Œì„ í™”ë©´ì€ ìŠ¤í¬ë¡¤ ê¸ˆì§€, ì¼ì§€ëŠ” ìŠ¤í¬ë¡¤ í—ˆìš© */
        body { margin: 0; background-color: #0b0b15; color: white; font-family: 'Noto Serif KR', serif; overflow: hidden; }

        /* [í™”ë©´ 1] ìš°ì£¼ ì‹œë®¬ë ˆì´ì…˜ */
        #space-container {
            position: relative; width: 100vw; height: 100vh;
            background: radial-gradient(circle at center, #1a1a2e 0%, #000000 100%);
            display: flex; justify-content: center; align-items: center;
        }

        .star { position: absolute; background: white; border-radius: 50%; opacity: 0.5; animation: twinkle 3s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        canvas { z-index: 10; }

        /* UI ë ˆì´ì–´ */
        #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 20; pointer-events: none; }
        
        #dialogue-box {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            width: 85%; max-width: 800px; background: rgba(0, 0, 0, 0.6); border: 2px solid #ffca28;
            border-radius: 20px; padding: 20px; display: flex; align-items: center; pointer-events: auto;
            color: #fff; transition: opacity 0.5s;
        }
        #char-img { font-size: 50px; margin-right: 20px; }
        #text-area { font-family: 'Gaegu'; font-size: 24px; line-height: 1.4; flex: 1; }
        #speed-readout { font-size: 18px; color: #ffeb3b; margin-top: 5px; font-weight: bold; }

        #controls {
            position: absolute; top: 20px; right: 20px; pointer-events: auto; display: flex; flex-direction: column; gap: 10px;
        }
        .ctrl-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.5); color: white;
            padding: 12px 25px; border-radius: 30px; cursor: pointer; font-family: 'Gaegu'; font-size: 20px;
            transition: all 0.3s; text-align: left;
        }
        .ctrl-btn:hover, .ctrl-btn.active { background: #ffca28; color: black; box-shadow: 0 0 15px #ffca28; font-weight: bold; }

        #mode-label {
            position: absolute; top: 20px; left: 20px; font-family: 'Gaegu'; font-size: 40px; 
            color: rgba(255,255,255,0.8); text-shadow: 0 0 10px #2196f3;
        }

        /* --- [í™”ë©´ 2] ê´€ì°° ì¼ì§€ (ë¦¬í¬íŠ¸ & í€´ì¦ˆ) - ìˆ˜ì •ëœ ë¶€ë¶„ --- */
        #report-screen {
            display: none; 
            position: fixed; /* í™”ë©´ì— ê³ ì • */
            top: 0; left: 0; 
            width: 100%; height: 100vh; /* ì „ì²´ í™”ë©´ ì°¨ì§€ */
            background: #eee; 
            z-index: 100; /* ë§¨ ìœ„ë¡œ ì˜¬ë¦¼ */
            color: #333; 
            overflow-y: auto; /* â˜… ì„¸ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš© (í•µì‹¬) */
            justify-content: center; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
            padding-top: 40px;
            padding-bottom: 40px;
        }
        
        #journal-paper {
            width: 210mm; /* A4 í­ */
            max-width: 90%; /* ëª¨ë°”ì¼ ëŒ€ì‘ */
            background: #fff; 
            padding: 50px; 
            box-sizing: border-box;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); 
            margin: 0 auto; /* ì¤‘ì•™ ì •ë ¬ */
            margin-bottom: 50px; /* ì•„ë˜ìª½ ì—¬ë°± í™•ë³´ */
            position: relative;
        }

        h1.title { font-family: 'Gaegu'; font-size: 40px; text-align: center; color: #1a237e; border-bottom: 3px double #1a237e; padding-bottom: 15px; margin-bottom: 30px; }
        .section { margin-bottom: 30px; }
        .label { font-size: 20px; font-weight: bold; color: #3949ab; display: block; margin-bottom: 10px; font-family: 'Gaegu'; border-left: 5px solid #ffca28; padding-left: 10px;}
        
        #captured-universe { width: 100%; height: auto; max-height: 400px; background: #000; object-fit: contain; border: 2px solid #333; margin-bottom: 10px; display: block; margin-left: auto; margin-right: auto; }
        
        /* í€´ì¦ˆ ìŠ¤íƒ€ì¼ */
        .quiz-box { background: #e3f2fd; padding: 20px; border-radius: 15px; border: 2px dashed #2196f3; }
        .quiz-question { font-size: 18px; margin-bottom: 10px; font-weight: bold; }
        .quiz-options { display: flex; gap: 10px; flex-wrap: wrap; }
        .quiz-btn { padding: 10px 20px; border: 1px solid #aaa; background: white; cursor: pointer; border-radius: 10px; font-family: 'Gaegu'; font-size: 18px; flex: 1; min-width: 100px; }
        .quiz-btn:hover { background: #bbdefb; }
        .quiz-result { margin-top: 10px; font-weight: bold; color: #d81b60; font-size: 20px; display: none; }

        #auto-text { background: #f9fbe7; padding: 15px; border-radius: 10px; font-family: 'Gaegu'; font-size: 20px; line-height: 1.6; }

        .btn-group { text-align: center; margin-top: 30px; padding-bottom: 20px; }

        @media print {
            body { background: white; -webkit-print-color-adjust: exact; overflow: visible; }
            #space-container, .btn-group, .quiz-options { display: none !important; }
            #report-screen { display: block !important; position: static; padding: 0; height: auto; overflow: visible; }
            #journal-paper { box-shadow: none; width: 100%; margin: 0; padding: 0; }
            .quiz-box { border: 1px solid #ccc; }
            .quiz-result { display: block !important; }
        }
    </style>
</head>
<body>

    <div id="space-container">
        <div id="mode-label">ê´€ì°° ì¤€ë¹„ ì¤‘...</div>
        
        <script>
            for(let i=0; i<80; i++) {
                let star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random()*3 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random()*100 + 'vw';
                star.style.top = Math.random()*100 + 'vh';
                star.style.animationDuration = (Math.random()*3 + 1) + 's';
                document.getElementById('space-container').appendChild(star);
            }
        </script>

        <canvas id="spaceCanvas"></canvas>

        <div id="ui-layer">
            <div id="controls">
                <button class="ctrl-btn" onclick="setMode('rotation')" id="btn-rot">ğŸŒªï¸ ìì „ ì—°ì£¼ (í•˜ë£¨)</button>
                <button class="ctrl-btn" onclick="setMode('revolution')" id="btn-rev">ğŸ’« ê³µì „ ì—°ì£¼ (1ë…„)</button>
                <button class="ctrl-btn" style="margin-top:20px; background:#4caf50;" onclick="finishObservation()">ğŸ“ ê´€ì°° ì¼ì§€ ì“°ê¸°</button>
            </div>

            <div id="dialogue-box">
                <div id="char-img">ğŸ§™â€â™‚ï¸</div>
                <div id="text-area">
                    <span id="main-text">ì•ˆë…•? ë‚œ ë¬´ë‹ˆì•¼. ë²„íŠ¼ì„ ëˆŒëŸ¬ í–‰ì„±ì˜ ì›€ì§ì„ì„ ê´€ì°°í•´ ë´.</span>
                    <div id="speed-readout"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="report-screen">
        <div id="journal-paper">
            <h1 class="title">ğŸª ìš°ì£¼ íƒí—˜ ì¼ì§€</h1>
            
            <div class="section" style="display: flex; justify-content: space-between;">
                <div style="font-family:'Gaegu'; font-size:24px;">íƒí—˜ëŒ€ì›: <span contenteditable="true" style="border-bottom:1px solid #333; min-width:100px; display:inline-block;">________</span></div>
                <div style="font-family:'Gaegu'; font-size:24px;" id="date-now"></div>
            </div>

            <div class="section">
                <span class="label">1. ê´€ì°° ì‚¬ì§„ (ìì „ê³¼ ê³µì „)</span>
                <img id="captured-universe" src="">
            </div>

            <div class="section">
                <span class="label">2. ë¬´ë‹ˆì˜ ê´€ì°° ë¶„ì„ (ìë™ ê¸°ë¡)</span>
                <div id="auto-text">
                    ë°ì´í„° ë¶„ì„ ì¤‘...
                </div>
            </div>

            <div class="section">
                <span class="label">3. ìŠ¤í”¼ë“œ í€´ì¦ˆ! (ì •ë‹µì„ ëˆŒëŸ¬ë³´ì„¸ìš”)</span>
                <div class="quiz-box">
                    <div class="quiz-question">Q. íƒœì–‘ ì£¼ìœ„ë¥¼ ê°€ì¥ ë¹¨ë¦¬ í•œ ë°”í€´ ë„ëŠ”(ê³µì „) í–‰ì„±ì€?</div>
                    <div class="quiz-options">
                        <button class="quiz-btn" onclick="checkQuiz(this, false)">ëª©ì„± (ëŠë¦¼ë³´)</button>
                        <button class="quiz-btn" onclick="checkQuiz(this, true)">ìˆ˜ì„± (ë‹¬ë¦¬ê¸°ì™•)</button>
                        <button class="quiz-btn" onclick="checkQuiz(this, false)">í•´ì™•ì„± (ê±°ë¶ì´)</button>
                    </div>
                    <div class="quiz-result" id="quiz-res-1"></div>
                </div>
                <br>
                <div class="quiz-box">
                    <div class="quiz-question">Q. 'ìì „'ê³¼ 'ê³µì „'ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</div>
                    <div class="quiz-options">
                        <button class="quiz-btn" onclick="checkQuiz2(this, true)">ìì „ì€ ì œìë¦¬ ëŒê¸°, ê³µì „ì€ íƒœì–‘ ëŒê¸°</button>
                        <button class="quiz-btn" onclick="checkQuiz2(this, false)">ìì „ì€ íƒœì–‘ ëŒê¸°, ê³µì „ì€ ì œìë¦¬ ëŒê¸°</button>
                    </div>
                    <div class="quiz-result" id="quiz-res-2"></div>
                </div>
            </div>

            <div class="section" style="text-align: right; margin-top: 50px;">
                <p style="font-family: 'Gaegu'; font-size: 22px; color: #1a237e;">
                    "ìš°ì£¼ì˜ ëª¨ë“  ë³„ë“¤ì€ ê°ìì˜ ì†ë„ë¡œ ì¶¤ì¶”ê³  ìˆë‹¨ë‹¤."<br>- ì§€ë„ êµì‚¬ ë¬´ë‹ˆ -
                </p>
            </div>
            
            <div class="btn-group">
                <button class="ctrl-btn" style="background:#1a237e; color:white; display:inline-block;" onclick="window.print()">ğŸ–¨ï¸ ì¸ì‡„ / ì €ì¥</button>
                <button class="ctrl-btn" style="background:#f57c00; color:white; display:inline-block;" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('spaceCanvas');
        const ctx = canvas.getContext('2d');
        let width, height, centerX, centerY;
        
        const planets = [
            { name: "ìˆ˜ì„±", r: 70, revSpeed: 0.04, rotSpeed: 0.1, color: "#bdbdbd", size: 6, desc: "ì „ë ¥ì§ˆì£¼!" },
            { name: "ê¸ˆì„±", r: 100, revSpeed: 0.025, rotSpeed: -0.01, color: "#ffcc80", size: 9, desc: "ë°˜ëŒ€ë¡œ ì²œì²œíˆ ìì „í•´ìš”" },
            { name: "ì§€êµ¬", r: 140, revSpeed: 0.02, rotSpeed: 0.2, color: "#4fc3f7", size: 9, desc: "ìƒëª…ì˜ í–‰ì„±" },
            { name: "í™”ì„±", r: 180, revSpeed: 0.015, rotSpeed: 0.18, color: "#ff7043", size: 7, desc: "ë¶‰ì€ ì‚¬ë§‰" },
            { name: "ëª©ì„±", r: 250, revSpeed: 0.008, rotSpeed: 0.4, color: "#dce775", size: 18, desc: "ìì „ì´ ì—„ì²­ ë¹¨ë¼ìš”!" },
            { name: "í† ì„±", r: 310, revSpeed: 0.006, rotSpeed: 0.38, color: "#ffe082", size: 15, desc: "ê³ ë¦¬ê°€ ì˜ˆë»ìš”" },
            { name: "ì²œì™•ì„±", r: 360, revSpeed: 0.004, rotSpeed: 0.2, color: "#80deea", size: 11, desc: "ëˆ„ì›Œì„œ ëŒì•„ìš”" },
            { name: "í•´ì™•ì„±", r: 410, revSpeed: 0.003, rotSpeed: 0.22, color: "#5c6bc0", size: 11, desc: "ë„ˆë¬´ ì¶”ì›Œìš”" }
        ];

        let currentMode = "ready";
        let time = 0;

        function init() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            centerX = width / 2;
            centerY = height / 2;
        }
        window.addEventListener('resize', init);
        init();

        function draw() {
            ctx.clearRect(0, 0, width, height);

            ctx.shadowBlur = 50; ctx.shadowColor = "#ffeb3b"; ctx.fillStyle = "#ffeb3b";
            ctx.beginPath(); ctx.arc(centerX, centerY, 30, 0, Math.PI * 2); ctx.fill();
            ctx.shadowBlur = 0;

            updateStatusText();

            planets.forEach((p, index) => {
                let angle = 0;
                if (currentMode === 'revolution') {
                    angle = time * p.revSpeed;
                } else {
                    angle = index * 0.8;
                }

                let x = centerX + Math.cos(angle) * p.r;
                let y = centerY + Math.sin(angle) * p.r;

                ctx.strokeStyle = "rgba(255, 255, 255, 0.1)";
                ctx.beginPath(); ctx.arc(centerX, centerY, p.r, 0, Math.PI * 2); ctx.stroke();

                ctx.save();
                ctx.translate(x, y);
                
                if (currentMode === 'rotation') {
                    let spin = time * p.rotSpeed * 5;
                    ctx.rotate(spin);
                } else {
                    ctx.rotate(angle);
                }

                ctx.shadowBlur = 10; ctx.shadowColor = p.color; ctx.fillStyle = p.color;
                ctx.beginPath(); ctx.arc(0, 0, p.size, 0, Math.PI * 2); ctx.fill();
                
                ctx.fillStyle = "rgba(0,0,0,0.3)";
                ctx.beginPath(); ctx.arc(p.size/2, 0, p.size/3, 0, Math.PI*2); ctx.fill(); 
                ctx.fillRect(-p.size, -2, p.size*2, 4); 
                
                ctx.restore();

                ctx.fillStyle = "white"; ctx.font = "14px Noto Serif KR";
                ctx.fillText(p.name, x - 10, y + p.size + 15);
            });

            if (currentMode !== 'ready') time++;
            requestAnimationFrame(draw);
        }
        draw();

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.ctrl-btn').forEach(b => b.classList.remove('active'));
            const label = document.getElementById('mode-label');
            const mainText = document.getElementById('main-text');

            if(mode === 'rotation') {
                document.getElementById('btn-rot').classList.add('active');
                label.innerText = "ğŸŒªï¸ ìì „: ì œìë¦¬ì—ì„œ íŒ½ì´ì²˜ëŸ¼ ëŒì•„ìš”";
                label.style.color = "#ff4081";
                mainText.innerHTML = "ìì „ì€ <strong>ë‚®ê³¼ ë°¤</strong>ì„ ë§Œë“¤ì–´ìš”.<br>ëª©ì„±(Jupiter)ì´ ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ ë„ëŠ”ì§€ ë³´ì„¸ìš”!";
            } else if (mode === 'revolution') {
                document.getElementById('btn-rev').classList.add('active');
                label.innerText = "ğŸ’« ê³µì „: íƒœì–‘ ì£¼ìœ„ë¥¼ í¬ê²Œ ëŒì•„ìš”";
                label.style.color = "#2196f3";
                mainText.innerHTML = "ê³µì „ì€ <strong>ë´„ ì—¬ë¦„ ê°€ì„ ê²¨ìš¸</strong>ì„ ë§Œë“¤ì–´ìš”.<br>ìˆ˜ì„±ì´ íƒœì–‘ ì£¼ìœ„ë¥¼ ìŒ©ìŒ© ë‹¬ë¦¬ê³  ìˆì–´ìš”!";
            }
        }

        function updateStatusText() {
            const readout = document.getElementById('speed-readout');
            if (currentMode === 'revolution') {
                let fastPlanet = planets[0];
                let slowPlanet = planets[7];
                readout.innerHTML = `ğŸ’¨ ${fastPlanet.name}: ${fastPlanet.desc} (88ì¼) <br> ğŸ¢ ${slowPlanet.name}: ${slowPlanet.desc} (165ë…„)`;
            } else if (currentMode === 'rotation') {
                readout.innerHTML = `âš¡ ëª©ì„±: 1ë°”í€´ ë„ëŠ”ë° 10ì‹œê°„ë°–ì— ì•ˆ ê±¸ë ¤ìš”!<br>ğŸ¢ ê¸ˆì„±: ë„ˆë¬´ ëŠë ¤ì„œ í•˜ë£¨ê°€ 1ë…„ë³´ë‹¤ ê¸¸ì–´ìš”.`;
            } else {
                readout.innerHTML = "";
            }
        }

        function finishObservation() {
            document.getElementById('space-container').style.display = 'none';
            document.getElementById('report-screen').style.display = 'flex'; // flexë¡œ ì„¤ì •í•˜ì—¬ ì¤‘ì•™ ì •ë ¬ ìœ ì§€
            
            const d = new Date();
            document.getElementById('date-now').innerText = `${d.getFullYear()}ë…„ ${d.getMonth()+1}ì›” ${d.getDate()}ì¼`;
            
            document.getElementById('captured-universe').src = canvas.toDataURL('image/png');

            const text = `
                ì˜¤ëŠ˜ ìš°ë¦¬ëŠ” íƒœì–‘ê³„ì˜ ì›€ì§ì„ì„ ê´€ì°°í–ˆìŠµë‹ˆë‹¤.<br>
                <br>
                1. <strong>[ìì „ ê´€ì°°]</strong> ëª©ì„±ì€ íŒ½ì´ì²˜ëŸ¼ ì•„ì£¼ ë¹ ë¥´ê²Œ ëŒì•˜ê³ , ê¸ˆì„±ì€ ì•„ì£¼ ì²œì²œíˆ ë°˜ëŒ€ë¡œ ëŒì•˜ìŠµë‹ˆë‹¤.<br>
                2. <strong>[ê³µì „ ê´€ì°°]</strong> íƒœì–‘ì— ê°€ê¹Œìš´ ìˆ˜ì„±ì€ ë°”ì˜ê²Œ ë‹¬ë ¸ì§€ë§Œ, ë©€ë¦¬ ìˆëŠ” í•´ì™•ì„±ì€ ì•„ì£¼ ëŠê¸‹í•˜ê²Œ ì›€ì§ì˜€ìŠµë‹ˆë‹¤.<br>
                <br>
                ì´ì²˜ëŸ¼ í–‰ì„±ë“¤ì€ ì €ë§ˆë‹¤ ë‹¤ë¥¸ ì†ë„ë¡œ ìš°ì£¼ì˜ ì§ˆì„œë¥¼ ì§€í‚¤ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
            `;
            document.getElementById('auto-text').innerHTML = text;
        }

        function checkQuiz(btn, isCorrect) {
            const res = document.getElementById('quiz-res-1');
            if(isCorrect) {
                res.innerHTML = "â­• ì •ë‹µì…ë‹ˆë‹¤! ìˆ˜ì„±ì€ íƒœì–‘ê³¼ ê°€ê¹Œì›Œì„œ ì œì¼ ë¹¨ë¼ìš”!";
                btn.style.background = "#a5d6a7";
            } else {
                res.innerHTML = "âŒ ë•¡! ë‹¤ì‹œ ìƒê°í•´ë³¼ê¹Œìš”? íƒœì–‘ê³¼ ê°€ê¹Œìš¸ìˆ˜ë¡ ë¹¨ë¼ìš”.";
                btn.style.background = "#ef9a9a";
            }
            res.style.display = "block";
        }

        function checkQuiz2(btn, isCorrect) {
            const res = document.getElementById('quiz-res-2');
            if(isCorrect) {
                res.innerHTML = "â­• ë”©ë™ëŒ•! ìì „=í•˜ë£¨, ê³µì „=1ë…„ ì…ë‹ˆë‹¤.";
                btn.style.background = "#a5d6a7";
            } else {
                res.innerHTML = "âŒ ë•¡! íŒ½ì´ì²˜ëŸ¼ ì œìë¦¬ ë„ëŠ” ê²Œ 'ìì „'ì´ì—ìš”.";
                btn.style.background = "#ef9a9a";
            }
            res.style.display = "block";
        }
    </script>
</body>
</html>